{"version":3,"sources":["containers/appointments/appointment/views/detailView/medications/addSection.js","containers/appointments/appointment/views/detailView/medications/listSection.js","containers/appointments/appointment/views/detailView/medications/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js"],"names":["AddSection","props","useState","errorMessage","setErrorMessage","name","dosage","fields","setFields","handleChange","e","a","target","value","preventDefault","newMedication","fromUsername","Username","user","session","toUsername","appointment","patient","fetch","id","method","credentials","headers","authToken","body","JSON","stringify","response","json","data","ok","Error","message","appendMedication","console","error","className","handleSubmit","role","for","type","onChange","placeholder","DefaultMedicationItem","MedicationItem","handleDelete","medication","fromCurrentUser","handleClick","ListSection","medications","length","map","index","deleteMedication","MedicationSection","limit","state","setState","url","searchParams","URLSearchParams","append","Math","ceil","toString","newMedications","prevState","updatedMedications","filter","isCurrentUserPhysician","useCompareUsers","physician","title","expandIcon","collapseIcon","callback","_toConsumableArray","arr","Array","isArray","arrayLikeToArray","iter","Symbol","iterator","Object","from","unsupportedIterableToArray","TypeError"],"mappings":"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","file":"static/js/17.21579d0c.chunk.js","sourcesContent":["import React, { useState } from 'react';\nimport { Form, FormGroup, FormLabel, FormRow, \n    FormSubmit } from '../../../../../../components/form';\nimport { Username } from '../../../../../../components/users';\n\n\nexport default function AddSection(props) {\n    const [errorMessage, setErrorMessage] = useState(\"\");\n    const [fields, setFields] = useState({\n        name: \"\",\n        dosage: \"\"\n    });\n\n    async function handleChange(e) {\n        setFields({\n            ...fields,\n            [e.target.name]: e.target.value\n        });\n    }\n\n    async function handleSubmit(e) {\n        e.preventDefault();\n        try {\n            const newMedication = {\n                fromUsername: Username({ user: props.session}),\n                toUsername: Username({ user: props.appointment.patient}),\n                name: fields.name,\n                dosage: fields.dosage\n            };\n\n            const response = await fetch(`/api/appointments/${props.appointment.id}/medications`, {\n                method: 'POST',\n                credentials: 'same-origin',\n                headers: {\n                  'Content-Type': 'application/json',\n                  'Authorization': `Bearer ${props.session.authToken}`\n                },\n                body: JSON.stringify(newMedication)\n            });\n\n            let data = await response.json();\n            if (!response.ok) {\n                throw new Error(data.message);\n            }\n\n            newMedication.id = data.id;\n            if (props.appendMedication) {\n                props.appendMedication(newMedication);\n            }\n\n            setFields({\n                ...fields,\n                name: \"\",\n                dosage: \"\"\n            });\n        } catch (err) {\n            console.error(`Failed to add new medication. ${err}`);\n            setErrorMessage(err.message);\n        }\n    }\n\n    return (\n        <Form className=\"container-fluid\" handleSubmit={handleSubmit}>\n            {(errorMessage) &&\n                <FormRow className=\"justify-content-center\">\n                    <div className=\"alert alert-danger\" role=\"alert\">{errorMessage}</div>\n                </FormRow>\n            }\n            <FormRow className=\"my-2\">\n                <FormLabel for=\"medicationsForm01\" className=\"col-sm-4\">Name</FormLabel>\n                <FormGroup className=\"col-sm-8\">\n                    <input id=\"medicationsForm01\" name=\"name\" type=\"text\" \n                        className=\"form-control\" value={fields.name} onChange={handleChange} \n                            placeholder=\"Name of Medication\" \n                    />\n                </FormGroup>\n            </FormRow>\n            <FormRow className=\"my-2\">\n                <FormLabel for=\"medicationsForm02\" className=\"col-sm-4\">Dosage (in mg)</FormLabel>\n                <FormGroup className=\"col-sm-8\">\n                    <input id=\"medicationsForm02\" name=\"dosage\" type=\"text\" \n                        className=\"form-control\" value={fields.dosage} onChange={handleChange}\n                            placeholder=\"Dosage (in mg)\" \n                    />\n                </FormGroup>\n            </FormRow>\n            <FormRow className=\"my-2 justify-content-center\">\n                <FormSubmit className=\"btn-primary col-auto col-md-4\">Add</FormSubmit>\n            </FormRow>\n        </Form>\n    );\n}","import React from 'react';\nimport { Col, FluidContainer, Row } from '../../../../../../components/layout';\nimport { Username } from '../../../../../../components/users';\nimport { WidgetList, WidgetListItem, WidgetDropdown, \n    WidgetDropdownItem } from '../../../../../../components/widgets';\n\n\nfunction DefaultMedicationItem(props) {\n    return (\n        <WidgetListItem>\n            <FluidContainer>\n                <Row>\n                    <Col className=\"md-font-sm text-center text-muted\">No medication available</Col>\n                </Row>\n            </FluidContainer>\n        </WidgetListItem>\n    );\n}\n\n\nfunction MedicationItem(props) {\n    async function handleDelete(e) {\n        e.preventDefault();\n        if (props.handleDelete) {\n            props.handleDelete(props.medication.id);\n        }\n    }\n\n    const fromUsername = props.medication.fromUsername;\n    const currentUsername = Username({ user: props.session });\n    const fromCurrentUser = (currentUsername === fromUsername) ? true: false;\n\n    return (\n        <WidgetListItem>\n            <FluidContainer>\n                <Row>\n                    <Col className=\"align-self-center\">\n                        <Row>\n                            <Col className=\"text-truncate\">{props.medication.name}</Col>\n                            <Col className=\"col-auto\">{`${props.medication.dosage} mg`}</Col>\n                        </Row>\n                    </Col>\n                    <Col className=\"col-auto px-2\">\n                        {fromCurrentUser &&\n                            <WidgetDropdown>\n                                <WidgetDropdownItem handleClick={handleDelete}>Delete</WidgetDropdownItem>\n                            </WidgetDropdown>\n                        }\n                    </Col>\n                </Row>\n            </FluidContainer>\n        </WidgetListItem>\n    );\n}\n\n\nexport default function ListSection(props) {\n    return (\n        <WidgetList>\n            {(props.medications.length !== 0) ?\n                <>\n                    {props.medications.map((medication, index) => (\n                        <MedicationItem \n                            key={index}\n                            session={props.session}\n                            medication={medication}\n                            handleDelete={props.deleteMedication}\n                        />\n                    ))}\n                </> :\n                <DefaultMedicationItem />\n            }\n        </WidgetList>\n    );\n}","import React, { useState } from 'react';\nimport { useCompareUsers } from '../../../../../../components/hooks';\nimport { AutoLoader } from '../../../../../../components/loaders';\nimport { TitleBar, TitleToggler, Widget, \n    WidgetCollapsible } from '../../../../../../components/widgets';\n\nimport AddSection from './addSection';\nimport ListSection from './listSection';\n\n\nexport default function MedicationSection(props) {\n    const [state, setState] = useState({\n        medications: [],\n        limit: 10\n    });\n\n    async function appendMedications() {\n        try {\n            const url = `/api/appointments/${props.appointment.id}/medications`;\n\n            const searchParams = new URLSearchParams();\n            searchParams.append('page', Math.ceil(state.medications.length / state.limit));\n            searchParams.append('limit', state.limit);\n\n            const response = await fetch(`${url}?${searchParams.toString()}`, {\n                headers: {\n                    'Authorization': `Bearer ${props.session.authToken}`\n                }\n            });\n\n            let newMedications = await response.json();\n            if (!response.ok) {\n                throw new Error(newMedications.message);\n            }\n\n            setState(prevState => {\n                const updatedMedications = [...prevState.medications, ...newMedications];\n\n                return {\n                    ...prevState,\n                    medications: updatedMedications\n                }\n            });\n        } catch (err) {\n            console.error(`Failed to append more medications. ${err}`);\n        }\n    }\n\n    async function appendMedication(newMedication) {\n        setState(prevState => {\n            const newMedications = [newMedication, ...prevState.medications];\n\n            return {\n                ...prevState,\n                medications: newMedications\n            }\n        });\n    }\n\n    async function deleteMedication(id) {\n        try {\n            const response = await fetch(`/api/appointments/${props.appointment.id}/medications/${id}`, {\n                method: 'DELETE',\n                credentials: 'same-origin',\n                headers: {\n                  'Content-Type': 'application/json',\n                  'Authorization': `Bearer ${props.session.authToken}`\n                }\n            });\n\n            let data = await response.json();\n            if (!response.ok) {\n                throw new Error(data.message);\n            }\n\n            setState(prevState => {\n                const newMedications = state.medications.filter(medication => {\n                    return medication.id !== id;\n                });\n\n                return {\n                    ...prevState,\n                    medications: newMedications\n                }\n            });\n        } catch (err) {\n            console.error(`Failed to delete medication- ${id}. ${err}`);\n        }\n    }\n\n    // Now render view\n    const isCurrentUserPhysician = useCompareUsers(props.session, props.appointment.physician);\n\n    return (\n        <>\n            <Widget>\n                <TitleBar title=\"Medications\">\n                    {isCurrentUserPhysician &&\n                        <TitleToggler \n                            target=\"apptMedicationAdd01\"\n                            expandIcon=\"add\"\n                            collapseIcon=\"clear\"\n                        />\n                    }\n                </TitleBar>\n                <WidgetCollapsible id=\"apptMedicationAdd01\">\n                    <AddSection \n                        session={props.session}\n                        appointment={props.appointment}\n                        appendMedication={appendMedication}\n                    />\n                </WidgetCollapsible>\n                <ListSection\n                    session={props.session}\n                    medications={state.medications}\n                    deleteMedication={deleteMedication}\n                />\n            </Widget>\n            <AutoLoader callback={appendMedications} />\n        </>\n    );\n}","import arrayWithoutHoles from \"@babel/runtime/helpers/esm/arrayWithoutHoles\";\nimport iterableToArray from \"@babel/runtime/helpers/esm/iterableToArray\";\nimport unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nimport nonIterableSpread from \"@babel/runtime/helpers/esm/nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import arrayLikeToArray from \"@babel/runtime/helpers/esm/arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}"],"sourceRoot":""}