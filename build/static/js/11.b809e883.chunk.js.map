{"version":3,"sources":["containers/chats/chat/detailedView/messageWindow.js","containers/chats/chat/detailedView/sendMessage.js","containers/chats/chat/detailedView/index.js","containers/chats/chat/index.js","containers/chats/views/chatView.js","components/form.js","components/dropdown.js","containers/home/titleBar.js"],"names":["MessageWindow","props","bottomRef","useRef","useState","messages","limit","state","setState","a","chat","url","id","searchParams","URLSearchParams","append","Math","ceil","length","fetch","toString","headers","session","authToken","messagesResponse","json","data","ok","Error","message","newMessages","reverse","prevState","updatedMessages","console","error","useEffect","currentBottomRef","current","scrollIntoView","behavior","block","inline","err","channel","on","lastTimestamp","lastUsername","messageItems","entries","idx","timestamp","Date","toDateString","dateItem","className","date","push","currentUsername","sender","isCurrentUser","username","chatAlign","chatColor","chatSpacing","messageItem","content","callback","ref","SendMessageForm","fields","setFields","e","target","name","value","preventDefault","emit","chatId","Username","user","autoComplete","handleSubmit","type","aria-label","onChange","placeholder","disabled","isDisabled","SendMessageBar","DetailedView","setChannel","reconnect","connected","connect","newChannel","io","debug","log","response","status","close","closeChannel","isLoading","title","path","appointmentId","icon","Chat","setIsLoading","setChat","credentials","initialize","listView","ChatView","Form","enctype","method","useExtendClass","onSubmit","children","FormRow","FormGroup","FormButton","onClick","handleClick","FormSubmit","FormLabel","htmlFor","for","FormLegend","Dropdown","DropdownButton","data-toggle","aria-haspopup","aria-expanded","DropdownButtonToggle","DropdownMenu","aria-labelledby","labelledBy","DropdownMenuDivider","DropdownMenuButton","Boolean","Toggler","otherProps","DropdownMenuItem","TitleBarLink","tooltip","role","TitleBarLinks","TitleBarSearch","query","handleSearch","aria-describedby","TitleBar","useSelector","s","toggleType","asList","NotificationDropDown","UserDropdown","dispatch","useDispatch","menuLinks","map","menuLink","index","exact"],"mappings":"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","file":"static/js/11.b809e883.chunk.js","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { Col, FluidContainer, Row } from '../../../../components/layout';\nimport { FullTime, PrettyDate } from '../../../../components/dates';\nimport { AutoLoader } from '../../../../components/loaders';\n\n\nexport default function MessageWindow(props) {\n    const bottomRef = useRef(null);\n\n    const [state, setState] = useState({\n        messages: [],\n        limit: 10\n    });\n\n    useEffect(() => {\n        const currentBottomRef = bottomRef.current;\n\n        async function appendMessage(message) {\n            try {\n                setState(prevState => {\n                    const updatedMessages = [...prevState.messages, message];\n\n                    return {\n                        ...prevState,\n                        messages: updatedMessages\n                    }\n                });\n            \n                currentBottomRef.scrollIntoView({\n                    behavior: \"smooth\",\n                    block: \"end\",\n                    inline: \"nearest\"\n                });\n            } catch (err) {\n                console.error(`Failed to receive chat message from server. ${err}`);\n            }\n        }\n\n        if (props.channel) {\n            props.channel.on('chat', appendMessage);\n        }\n    }, [props.channel]);\n\n    async function appendMessages() {\n        try {\n            if (props.chat) {\n                const url = `/api/chats/${props.chat.id}/messages`;\n\n                const searchParams = new URLSearchParams();\n                searchParams.append('page', Math.ceil(state.messages.length / state.limit));\n                searchParams.append('limit', state.limit);\n\n                const messagesResponse = await fetch(`${url}?${searchParams.toString()}`, {\n                    headers: {\n                    'Authorization': `Bearer ${props.session.authToken}`\n                    }\n                });\n            \n                let data = await messagesResponse.json();\n                if (!messagesResponse.ok) {\n                    throw new Error(data.message);\n                }\n            \n                const newMessages = data.reverse();\n                setState(prevState => {\n                    const updatedMessages = [ ...newMessages, ...prevState.messages ];\n\n                    return {\n                        ...prevState,\n                        messages: updatedMessages\n                    }\n                });\n            }   \n        } catch (err) {\n            console.error(`Failed to append chat messages. ${err}`);\n        }\n    }\n\n    // Now render message window.\n    let lastTimestamp = null;\n    let lastUsername = \"\";\n\n    const messageItems = [];\n    for (const [idx, message] of state.messages.entries()) {\n        let timestamp = new Date(message.timestamp);\n\n        if (!lastTimestamp || lastTimestamp.toDateString() !== timestamp.toDateString()) {\n            let dateItem = (\n                <Row key={`date-${idx}`} className=\"justify-content-center mt-3\">\n                    <Col className=\"col-auto md-chat-sys\">\n                        <p className=\"md-font-sm my-0 text-muted\">\n                            <PrettyDate date={timestamp} />\n                        </p>\n                    </Col>\n                </Row>\n            );\n\n            messageItems.push(dateItem);\n            lastTimestamp = timestamp;\n            lastUsername = \"\";\n        }\n\n        let currentUsername = message.sender;\n        let isCurrentUser = (props.session.username === currentUsername) ? true: false;\n\n        let chatAlign = (isCurrentUser) ? \"justify-content-end\": \"justify-content-start\";\n        let chatColor = (isCurrentUser) ? \"md-chat-out\": \"md-chat-in\";\n        let chatSpacing = (lastUsername === currentUsername) ? \"mt-1\": \"mt-3\";\n\n        let messageItem = (\n            <Row key={idx} className={`${chatAlign} ${chatSpacing}`}>\n                <Col className=\"col-10\">\n                    <Row className={chatAlign}>\n                        <FluidContainer className={`md-chat-msg ${chatColor} mx-2 p-2`}>\n                            <p className=\"my-0\">{message.content}</p>\n                            <footer className=\"d-flex justify-content-end\">\n                                <p className=\"my-0 md-font-xs text-muted\">\n                                    <FullTime date={timestamp} />\n                                </p>\n                            </footer>\n                        </FluidContainer>\n                    </Row>\n                </Col>\n            </Row>\n        );\n\n        messageItems.push(messageItem);\n        lastUsername = currentUsername;\n    }\n\n    return (\n        <Row className=\"md-msg-window flex-grow-1 overflow-y border-top border-bottom\">\n            <Col>\n                <AutoLoader callback={appendMessages} />\n                {messageItems}\n                <span ref={bottomRef} className=\"p-1\"></span>\n            </Col>\n        </Row>\n    );\n}","import React, { useState } from 'react';\nimport { Form, FormButton, FormGroup, FormRow } from '../../../../components/form';\nimport { LgIcon } from '../../../../components/icons';\nimport { Col, Footer } from '../../../../components/layout';\nimport { Username } from '../../../../components/users';\n\n\nfunction SendMessageForm(props) {\n    const [fields, setFields] = useState({\n        content: \"\"\n    });\n\n    async function handleChange(e) {\n        setFields({\n            ...fields,\n            [e.target.name]: e.target.value\n        });\n    }\n\n    async function handleSubmit(e) {\n        e.preventDefault();\n        try {\n            const timestamp = new Date();\n      \n            await props.channel.emit('chat', {\n                chatId: props.chat.id,\n                sender: Username({ user: props.session }),\n                timestamp: timestamp,\n                content: fields.content\n            });\n\n            setFields({\n                ...fields,\n                content: \"\"\n            });\n        } catch (err) {\n            console.error(`Failed to send chat message. ${err}`);\n        }\n    }\n\n    return (\n        <Form autoComplete=\"off\" handleSubmit={handleSubmit}>\n            <FormRow>\n                <FormGroup className=\"col my-2\">\n                    <input type=\"text\" name=\"content\" aria-label=\"Input chat message\"\n                        className=\"form-control\" value={fields.content} onChange={handleChange}\n                        placeholder=\"\" disabled={props.isDisabled}>\n                    </input>\n                </FormGroup>\n                <FormGroup className=\"col-auto my-2\">\n                    <FormButton type=\"submit\" className=\"md-btn p-2 d-flex align-items-center\"\n                        disabled={props.isDisabled}>\n                        <LgIcon>send</LgIcon>\n                    </FormButton>\n                </FormGroup>\n            </FormRow>\n        </Form>\n    );\n}\n\n\nexport default function SendMessageBar(props) {\n    return (\n        <Footer className=\"md-sbar p-2 justify-content-center\">\n            <Col>\n                <SendMessageForm\n                    session={props.session}\n                    chat={props.chat}\n                    channel={props.channel}\n                />\n            </Col>\n        </Footer>\n    );\n}","import React, { useEffect, useState } from 'react';\nimport { io } from 'socket.io-client';\nimport { FluidContainer } from '../../../../components/layout';\nimport { Loader } from '../../../../components/loaders';\n\nimport TitleBar, { TitleBarLink, TitleBarLinks } from '../../../home/titleBar';\nimport MessageWindow from './messageWindow';\nimport SendMessageBar from './sendMessage';\n\n\nexport default function DetailedView(props) {\n    const [channel, setChannel] = useState(null);\n\n    useEffect(() => {\n        async function reconnect() {\n            try {\n                if (channel && !channel.connected) {\n                    connect();\n                }\n            } catch (err) {\n                console.error(`Failed to reconnect to server. ${err}`);\n            }\n        }\n\n        async function connect() {\n            try {\n                const newChannel = io();\n\n                newChannel.on('connect', () => {\n                    console.debug(`Channel connection status: ${newChannel.connected}`);\n                    console.log(\"Connected to server.\");\n                });\n\n                newChannel.on('disconnect', reconnect);\n\n                newChannel.emit('join',\n                    { chatId: props.chat.id },\n                    (response) => {\n                        if (response.status === \"ok\") {\n                            console.debug(\"Joined chat session.\");\n                        } else {\n                            console.log(\"Failed to join chat session.\");\n                        }\n                    }\n                );\n\n                setChannel(newChannel);\n            } catch (err) {\n                console.error(`Failed to connect to server. ${err}`);\n            }\n        }\n\n        connect();\n        return function disconnect() {\n            async function closeChannel() {\n                try {\n                    if (channel) {\n                        channel.emit('leave',\n                            { chatId: props.chat.id },\n                            (response) => {\n                                if (response.status === \"ok\") {\n                                    console.debug(\"Left chat session.\");\n                                } else {\n                                    console.log(\"Failed to leave chat session.\");\n                                }\n                            }\n                        );\n\n                        channel.close();\n                        console.debug(`Channel connection status: ${channel.connected}`);\n                    }\n\n                    console.log(\"Disconnected from server.\");\n                    setChannel(null);\n                } catch (err) {\n                    console.error(`Failed to disconnect from server. ${err}`);\n                }\n            }\n\n            closeChannel();\n        }\n    }, [props.chat]);\n\n    return (\n        <FluidContainer className=\"d-flex flex-column md-chat h-100 px-0\">\n            {\n                (props.isLoading) ?\n                <>\n                    <Loader isLoading={true} />\n                </> :\n                <>\n                    <TitleBar title={props.chat.title} >\n                        <TitleBarLinks>\n                            <TitleBarLink\n                                path={`/appointments/${props.chat.appointmentId}`}\n                                title=\"Go to Appointment\"\n                                icon=\"event\"\n                            />\n                        </TitleBarLinks>\n                    </TitleBar>\n                    <MessageWindow \n                        session={props.session}\n                        chat={props.chat}\n                        channel={channel}\n                    />\n                    <SendMessageBar\n                        session={props.session}\n                        chat={props.chat}\n                        channel={channel}\n                    />\n                </>\n            }\n        </FluidContainer>\n    );\n}","import React, { useEffect, useState } from 'react';\n\nimport DetailedView from './detailedView';\n\n\nexport default function Chat(props) {\n    const [isLoading, setIsLoading] = useState(true);\n    const [chat, setChat] = useState({});\n\n    useEffect(() => {\n        async function initialize() {\n            try {\n                setIsLoading(true);\n                const response = await fetch(`/api/chats/${props.id}`, {\n                    credentials: 'same-origin',\n                    headers: {\n                      'Authorization': `Bearer ${props.session.authToken}`\n                    }\n                });\n\n                let data = await response.json();\n                if (!response.ok) {\n                    throw new Error(data.message);\n                }\n\n                setChat(data);\n            } catch (err) {\n                console.error(`Failed to initialize chat- ${props.id}. ${err}`);\n            } finally {\n                setIsLoading(false);\n            }\n        }\n\n        initialize();\n    }, [props.id, props.session]);\n\n\n    if (props.listView) {\n        return null;\n    } else {\n        return (\n            <DetailedView\n                session={props.session}\n                chat={chat}\n                isLoading={isLoading}\n            />\n        );\n    }\n}","import React from 'react';\n\nimport Chat from '../chat';\n\n\nexport default function ChatView(props) {\n    return (\n        <Chat\n            session={props.session}\n            id={props.id}\n            listView={false}\n        />\n    );\n}","import React from 'react';\nimport { useExtendClass } from \"./hooks.js\";\n\n\n/* Form layout components */\nexport function Form(props) {\n    const enctype = (props.enctype) ? props.enctype: \"application/x-www-form-urlencoded\";\n\n    return (\n        <form method=\"post\" autoComplete={props.autoComplete} enctype={enctype}\n            className={useExtendClass(\"\", props.className)} onSubmit={props.handleSubmit}>\n            {props.children}\n        </form>\n    );\n}\n\n\nexport function FormRow(props) {  \n    return (\n        <div className={useExtendClass(\"form-row\", props.className)}>\n            {props.children}\n        </div>\n    );\n}\n\n\nexport function FormGroup(props) {  \n    return (\n        <div className={useExtendClass(\"form-group\", props.className)}>\n            {props.children}\n        </div>\n    );\n}\n\n\n/* Form element components. */\nexport function FormButton(props) {  \n    return (\n        <button type={(props.type) ? props.type: \"button\"} disabled={props.disabled}\n            className={useExtendClass(\"btn\", props.className)} onClick={props.handleClick}>\n            {props.children}\n        </button>\n    );\n}\n\n\nexport function FormSubmit(props) {\n    return (\n        <FormButton type=\"submit\" disabled={props.disabled}\n            className={useExtendClass(\"btn-primary\", props.className)}>\n            {props.children}\n        </FormButton>\n    );\n}\n\n\nexport function FormText(props) {  \n    return (\n        <input type=\"text\" id={props.id} value={props.value} readOnly \n            className={useExtendClass(\"form-control-plaintext\", props.className)}\n        />\n    );\n}\n\n\nexport function FormLabel(props) {  \n    return (\n        <label htmlFor={props.for} className={useExtendClass(\"col-form-label\", props.className)}>\n            {props.children}\n        </label>\n    );\n  }\n\n\nexport function FormLegend(props) {  \n    return (\n        <legend htmlFor={props.for} className={useExtendClass(\"col-form-label\", props.className)}>\n            {props.children}\n        </legend>\n    );\n}\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { useExtendClass } from './hooks';\n\n\nexport function Dropdown(props) {\n    return (\n        <div className={useExtendClass(\"dropdown\", props.className)}>\n            {props.children}\n        </div>\n    );\n}\n\n\nexport function DropdownButton(props) {\n    return (\n        <button type=\"button\" id={props.id} data-toggle=\"dropdown\" \n            className={useExtendClass(\"btn\", props.className)}\n            aria-haspopup=\"true\" aria-expanded=\"false\">\n            {props.children}\n        </button>\n    );\n}\n\n\nexport function DropdownButtonToggle(props) {\n    return (\n        <button type=\"button\" id={props.id} data-toggle=\"dropdown\"\n            className={useExtendClass(\"btn dropdown-toggle\", props.className)}\n            aria-haspopup=\"true\" aria-expanded=\"false\">\n            {props.children}\n        </button>\n    );\n}\n\nexport function DropdownMenu(props) {\n    return (\n        <div aria-labelledby={props.labelledBy}\n            className={useExtendClass(\"dropdown-menu\", props.className)} >\n            {props.children}\n        </div>\n    );\n}\n\nexport function DropdownMenuDivider(props) {\n    return (\n        <div className={useExtendClass(\"dropdown-divider\", props.className)}></div>\n    );\n}\n\nexport function DropdownMenuLink(props) {\n    return (\n        <Link \n            to={props.url} exact={props.exact}\n            className={useExtendClass(\"dropdown-item\", props.className)}\n        >\n                {props.children}\n        </Link>\n    );\n}\n\nexport function DropdownMenuButton(props) {\n    return (\n        <button type=\"button\" onClick={props.handleClick}\n            className={useExtendClass(\"dropdown-item\", props.className)}\n                name={props.name} value={props.value} disabled={Boolean(props.disabled)}\n        >\n            {props.children}\n        </button>\n    );\n}","import React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { DropdownButton } from '../../components/buttons';\nimport { DropdownButtonToggle } from '../../components/dropdown';\nimport { Form } from '../../components/form';\nimport { useExtendClass } from '../../components/hooks';\nimport { LgIcon } from '../../components/icons';\nimport { Nav, NavBar, NavBrand, NavCollapsible, NavDropdown, NavDropdownLink, NavDropdownMenu, \n    NavDropdownMenuHeader, NavDropdownMenuItem, NavLink, NavLinks, NavToggler } from '../../components/navs';\nimport { ProfilePhoto } from '../../components/users';\n\n\nfunction Toggler(props) {\n    const { className, icon, ...otherProps } = props;\n    return (\n        <NavToggler\n            className={useExtendClass(\"md-btn p-2 mx-1\", className)}\n            {...otherProps}\n        >\n            <LgIcon className=\"d-flex align-items-center\">{icon}</LgIcon>\n        </NavToggler>\n    );\n}\n\n\nfunction DropdownMenuItem(props) {\n    const { title, icon, ...otherProps } = props;\n    return (\n        <NavDropdownMenuItem\n            className=\"md-mi d-flex align-items-center\"\n            {...otherProps}\n        >\n            <LgIcon>{icon}</LgIcon>\n            <p className=\"my-0 pl-2 text-truncate\">{title}</p>\n        </NavDropdownMenuItem>\n    );\n}\n\n\nexport function TitleBarLink(props) {\n    const { className, title, icon, ...otherProps } = props;\n    return (\n        <NavLink\n            { ...otherProps }\n            className={useExtendClass(\"md-btn mx-1 p-2 d-flex align-items-center\", className)}\n            tooltip={title}\n            role=\"button\"\n        >\n            <LgIcon>{icon}</LgIcon>\n            <p className=\"my-0 pl-2 text-truncate d-md-none\">{title}</p>\n        </NavLink>\n    );\n}\n\n\nexport function TitleBarLinks(props) {\n    return (\n        <NavLinks>\n            {props.children}\n        </NavLinks>\n    );\n}\n\n\nexport function TitleBarSearch(props) {\n    const [fields, setFields] = useState({\n        query: \"\"\n    });\n\n    async function handleChange(e) {\n        setFields({\n            ...fields,\n            [e.target.name]: e.target.value\n        });\n    }\n\n    async function handleSubmit(e) {\n        e.preventDefault();\n        try {\n            if (props.handleSearch) {\n                props.handleSearch(fields.query);\n            }\n        } catch (err) {\n            console.error(`Failed to handle search query. ${err}`);\n        }\n    }\n\n    return (\n        <Form handleSubmit={handleSubmit}\n            className={useExtendClass(\"form-inline mx-1 my-2 my-lg-0\", props.className)} >\n            <div className=\"input-group w-100\">\n                <input id=\"titlebarSearch01\" type=\"text\" className=\"form-control\" name=\"query\"\n                    placeholder={props.placeholder} value={fields.query} onChange={handleChange}\n                        aria-label=\"Search Query\" aria-describedby=\"titlebarSearch02\" />\n                <div className=\"input-group-append\">\n                    <button id=\"titlebarSearch02\" type=\"button\" \n                        className=\"btn btn-sm btn-outline-secondary\" >\n                        <LgIcon>search</LgIcon>\n                    </button>\n                </div>\n            </div>\n        </Form>\n    );\n}\n\n\nexport default function TitleBar(props) {\n    const session = useSelector(s => s.session);\n\n    return (\n        <NavBar className=\"navbar-expand-md navbar-light row md-tbar sticky-top justify-content-start\">\n            <Toggler\n                target=\"sideBar01\"\n                icon=\"menu\"\n                toggleType=\"modal\"\n            />\n            <NavBrand className=\"mr-auto p-1 font-weight-bold\">{props.title}</NavBrand>\n            {props.children && \n                <>\n                    <Toggler\n                        target=\"titleBarNav01\"\n                        icon=\"more_vert\"\n                    />\n                    <NavCollapsible \n                        id=\"titleBarNav01\"\n                        className=\"justify-content-end order-last order-md-4\"\n                    >\n                        {props.children}\n                    </NavCollapsible>\n                </>\n            }\n            <Nav className=\"order-md-last\" asList={true}>\n                <NotificationDropDown />\n                <UserDropdown\n                    session={session}\n                    user={session}\n                />\n            </Nav>\n        </NavBar>\n    );\n}\n\n\n// Session based components.\nfunction UserDropdown(props) {\n    const dispatch = useDispatch();\n\n    async function signOut(e) {\n        e.preventDefault();\n        try {\n            const response = await fetch(`/api/auth/signout`, {\n                method: 'GET',\n                credentials: 'same-origin',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': `Bearer ${props.session.authToken}`\n                }\n            });\n        \n            let data = await response.json();\n            if (!response.ok) {\n                throw new Error(data.message);\n            }\n\n            dispatch({\n                type: \"session/reset\"\n            });\n        } catch (err) {\n            console.error(`Failed to sign out. ${err}`);\n        }\n    }\n\n    const menuLinks = [\n        {\n            path: `/users/${props.user.username}`,\n            title: \"Profile\",\n            icon: \"person\"\n        },\n        {\n            path: \"/settings\",\n            title: \"Settings\",\n            icon: \"settings\"\n        },\n        {\n            title: \"Sign Out\",\n            icon: \"logout\",\n            handleClick: signOut\n        }\n    ];\n\n    return (\n        <NavDropdown>\n            <NavDropdownLink className=\"px-0 mx-1 d-flex align-items-center\">\n                <ProfilePhoto \n                    className=\"md-pfl-xs md-pfl-round\"\n                    session={props.session} \n                    user={props.user}\n                />\n            </NavDropdownLink>\n            <NavDropdownMenu className=\"dropdown-menu-right\">\n                {menuLinks.map((menuLink, index) => (\n                    <DropdownMenuItem\n                        key={index}\n                        path={menuLink.path}\n                        exact={menuLink.exact}\n                        title={menuLink.title}\n                        icon={menuLink.icon}\n                        handleClick={menuLink.handleClick}\n                    />\n                ))}\n            </NavDropdownMenu>\n        </NavDropdown>\n    );\n}\n\n\nfunction NotificationDropDown(props) {\n    return (\n        <NavDropdown className=\"mx-1 my-2\">\n            <DropdownButtonToggle className=\"md-btn p-2 d-flex align-items-center\">\n                <LgIcon>notifications</LgIcon>\n            </DropdownButtonToggle>\n            <NavDropdownMenu className=\"dropdown-menu-right\">\n                <NavDropdownMenuHeader>\n                    Coming Soon!\n                </NavDropdownMenuHeader>\n            </NavDropdownMenu>\n        </NavDropdown>\n    );\n}"],"sourceRoot":""}